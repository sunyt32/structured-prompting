description: Evaluate core-shot in-context setting

target:
  service: sing
  name: gcrprojvc1
  resource_group: gcr-singularity-proj1

environment:
  image: amlt-sing/pytorch-1.11.0
  setup:
    - pip install transformers --user
    - pip install datasets --user
    - pip install matplotlib --user

code:
  local_dir: $CONFIG_DIR/../

storage:
  yutao:
    storage_account_name: msranlpintern
    container_name: yutao

search:
  job_template:
    name: baseline-{task}-k{k}-{method}-{model}
    sku: G1
    priority: High
    command:
    - python3 eval_core.py --coreset_size {k} --task {task} --model {model}
     --data_path /mnt/yutao/data
     --log_path /mnt/yutao/core-shot/log/{task}_{k}_{model}_baseline_{method}.json
     --select_method {method}
  
  type: grid
  max_trials: 500
  params:
    - name: k
      spec: discrete
      values: [1024]
    - name: task
      spec: discrete
      # values: ["sst2", "sst5", "trec", "subj", "boolq", "hellaswag", "piqa", "copa", "winogrande", "dbpedia", "agnews", "rte", "cb", "mr", "arcc", "arce", "obqa"]
      values: ["sst2", "sst5", "trec", "subj", "piqa", "mr",  "arce"]
    - name: method
      spec: discrete
      values: ["random"]
    - name: model
      spec: discrete
      values: ["bloom-1b7"]

  

